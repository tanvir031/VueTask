<template>
  <div class="table-container">
    <SelectSec @show-data="showData" />
    <TableHead :data="data" />
    <DataGrid v-if="isEnabled" :headers="headers" :data="data" />
  </div>
</template>

<script setup>
import DataGrid from './components/DataGrid.vue'
import SelectSec from './components/SelectSec.vue'
import TableHead from './components/TableHead.vue'
import { ref } from 'vue'
import { provide } from 'vue'

const isEnabled = ref(false)

const headers = ref([
  { key: 'sl', label: 'SL' },
  { key: 'memberId', label: 'Member Id' },
  { key: 'name', label: 'Name' },
  { key: 'dwmPassed', label: 'D/W/M passed' },
  { key: 'c', label: 'C' },
  { key: 'acNo', label: 'A/c No' },
  { key: 'loan', label: 'Loan' },
  { key: 'gs', label: 'Gs' },
  { key: 'vs', label: 'VS' },
  { key: 'dps', label: 'DPS' },
  { key: 'pa', label: 'PA' },
  { key: 'sc', label: 'SC' },
  { key: 'total', label: 'Total' },
  { key: 'pa2', label: 'PA' },
  { key: 'sc2', label: 'SC' },
  { key: 'total2', label: 'Total' },
  { key: 'newDue', label: 'New Due' },
  { key: 'closingDue', label: 'Closing Due' },
  { key: 'pa3', label: 'PA' },
  { key: 'sc3', label: 'SC' },
  { key: 'total3', label: 'Total' },
  { key: 'disbursedDate', label: 'Disbursed Date' },
  { key: 'disbursedAmount', label: 'Disbursed Amount' },
  { key: 'gsPaBalance', label: 'GS PA Balance' },
  { key: 'vsPaBalance', label: 'VS PA Balance' },
  { key: 'view', label: 'View' },
])

const users = ref([
  {
    memberId: '10121100727',
    personalDetails: {
      firstName: 'John',
      lastName: 'Doe',
      dateOfBirth: '1988-04-15',
      gender: 'Male',
      email: 'john.doe@example.com',
      mobileNo: '+1-555-123-4567',
      guardianName: 'Michael Doe',
      address: {
        street: '123 Elm Street',
        city: 'Springfield',
        state: 'IL',
        zipCode: '62704',
        country: 'USA',
      },
      nationalId: 'AB1234567',
    },
    bankLoanDetails: {
      accountNumber: 'AC987654321',
      accountOpeningDate: '2020-01-15',
      loanId: 'L987654321',
      loanType: 'Personal Loan',
      loanAmount: 15000,
      currency: 'USD',
      interestRate: 7.5,
      loanTermMonths: 36,
      monthlyInstallment: 465.5,
      installmentSize: 465.5,
      principalBalance: 8700,
      loanStartDate: '2023-07-01',
      loanEndDate: '2026-06-30',
      loanStatus: 'Active',
    },
    employmentDetails: {
      employer: 'ABC Tech Solutions',
      jobTitle: 'Software Engineer',
      monthlyIncome: 5500,
      employmentStartDate: '2018-05-15',
      softwareId: 'SWD12345',
    },
    samityDetails: {
      samityDay: 'Wednesday',
      samityBlock: 'B',
      samityGroup: 'G3',
    },
    emergencyContact: {
      name: 'Jane Doe',
      relation: 'Spouse',
      mobileNo: '+1-555-987-6543',
    },
  },
  {
    memberId: '10121100732457',
    personalDetails: {
      firstName: 'John',
      lastName: 'Doe',
      dateOfBirth: '1988-04-15',
      gender: 'Male',
      email: 'john.doe@example.com',
      mobileNo: '+1-555-123-4567',
      guardianName: 'Michael Doe',
      address: {
        street: '123 Elm Street',
        city: 'Springfield',
        state: 'IL',
        zipCode: '62704',
        country: 'USA',
      },
      nationalId: 'AB1234567',
    },
    bankLoanDetails: {
      accountNumber: 'AC987654321',
      accountOpeningDate: '2020-01-15',
      loanId: 'L987654321',
      loanType: 'Personal Loan',
      loanAmount: 15000,
      currency: 'USD',
      interestRate: 7.5,
      loanTermMonths: 36,
      monthlyInstallment: 465.5,
      installmentSize: 465.5,
      principalBalance: 8700,
      loanStartDate: '2023-07-01',
      loanEndDate: '2026-06-30',
      loanStatus: 'Active',
    },
    employmentDetails: {
      employer: 'ABC Tech Solutions',
      jobTitle: 'Software Engineer',
      monthlyIncome: 5500,
      employmentStartDate: '2018-05-15',
      softwareId: 'SWD12345',
    },
    samityDetails: {
      samityDay: 'Wednesday',
      samityBlock: 'B',
      samityGroup: 'G3',
    },
    emergencyContact: {
      name: 'Jane Doe',
      relation: 'Spouse',
      mobileNo: '+1-555-987-6543',
    },
  },
  {
    memberId: '10121100727',
    personalDetails: {
      firstName: 'John',
      lastName: 'Doe',
      dateOfBirth: '1988-04-15',
      gender: 'Male',
      email: 'john.doe@example.com',
      mobileNo: '+1-555-123-4567',
      guardianName: 'Michael Doe',
      address: {
        street: '123 Elm Street',
        city: 'Springfield',
        state: 'IL',
        zipCode: '62704',
        country: 'USA',
      },
      nationalId: 'AB1234567',
    },
    bankLoanDetails: {
      accountNumber: 'AC987654321',
      accountOpeningDate: '2020-01-15',
      loanId: 'L987654321',
      loanType: 'Personal Loan',
      loanAmount: 15000,
      currency: 'USD',
      interestRate: 7.5,
      loanTermMonths: 36,
      monthlyInstallment: 465.5,
      installmentSize: 465.5,
      principalBalance: 8700,
      loanStartDate: '2023-07-01',
      loanEndDate: '2026-06-30',
      loanStatus: 'Active',
    },
    employmentDetails: {
      employer: 'ABC Tech Solutions',
      jobTitle: 'Software Engineer',
      monthlyIncome: 5500,
      employmentStartDate: '2018-05-15',
      softwareId: 'SWD12345',
    },
    samityDetails: {
      samityDay: 'Wednesday',
      samityBlock: 'B',
      samityGroup: 'G3',
    },
    emergencyContact: {
      name: 'Jane Doe',
      relation: 'Spouse',
      mobileNo: '+1-555-987-6543',
    },
  },
  {
    memberId: '10121100727',
    personalDetails: {
      firstName: 'John',
      lastName: 'Doe',
      dateOfBirth: '1988-04-15',
      gender: 'Male',
      email: 'john.doe@example.com',
      mobileNo: '+1-555-123-4567',
      guardianName: 'Michael Doe',
      address: {
        street: '123 Elm Street',
        city: 'Springfield',
        state: 'IL',
        zipCode: '62704',
        country: 'USA',
      },
      nationalId: 'AB1234567',
    },
    bankLoanDetails: {
      accountNumber: 'AC987654321',
      accountOpeningDate: '2020-01-15',
      loanId: 'L987654321',
      loanType: 'Personal Loan',
      loanAmount: 15000,
      currency: 'USD',
      interestRate: 7.5,
      loanTermMonths: 36,
      monthlyInstallment: 465.5,
      installmentSize: 465.5,
      principalBalance: 8700,
      loanStartDate: '2023-07-01',
      loanEndDate: '2026-06-30',
      loanStatus: 'Active',
    },
    employmentDetails: {
      employer: 'ABC Tech Solutions',
      jobTitle: 'Software Engineer',
      monthlyIncome: 5500,
      employmentStartDate: '2018-05-15',
      softwareId: 'SWD12345',
    },
    samityDetails: {
      samityDay: 'Wednesday',
      samityBlock: 'B',
      samityGroup: 'G3',
    },
    emergencyContact: {
      name: 'Jane Doe',
      relation: 'Spouse',
      mobileNo: '+1-555-987-6543',
    },
  },
])

provide('users', users)

const data = ref([
  {
    sl: '1',
    memberId: '10121100711',
    name: 'Md. Jamal',
    dwmPassed: '1',
    c: '8759',
    acNo: 'AC-24517',
    loan: '320',
    gs: 150,
    vs: 80,
    dps: 120,
    pa: '700',
    sc: '120',
    total: '940',
    pa2: '850',
    sc2: '200',
    total2: '1050',
    newDue: '13400',
    closingDue: '4600',
    pa3: '14500',
    sc3: '150',
    total3: '14650',
    disbursedDate: '2025-08-10',
    disbursedAmount: '14200',
    gsPaBalance: '5200',
    vsPaBalance: '1800',
    selected: false,
  },
  {
    sl: '2',
    memberId: '10121100712',
    name: 'Md. Karim',
    dwmPassed: '0',
    c: '8934',
    acNo: 'AC-65392',
    loan: '180',
    gs: 100,
    vs: 70,
    dps: 60,
    pa: '920',
    sc: '310',
    total: '1230',
    pa2: '460',
    sc2: '100',
    total2: '560',
    newDue: '12500',
    closingDue: '3100',
    pa3: '13600',
    sc3: '250',
    total3: '13850',
    disbursedDate: '2025-08-10',
    disbursedAmount: '9800',
    gsPaBalance: '3400',
    vsPaBalance: '1200',
    selected: false,
  },
  {
    sl: '3',
    memberId: '10121100713',
    name: 'Rahim Uddin',
    dwmPassed: '2',
    c: '9021',
    acNo: 'AC-77831',
    loan: '450',
    gs: 240,
    vs: 120,
    dps: 140,
    pa: '1250',
    sc: '300',
    total: '1550',
    pa2: '900',
    sc2: '250',
    total2: '1150',
    newDue: '15400',
    closingDue: '4000',
    pa3: '16200',
    sc3: '200',
    total3: '16400',
    disbursedDate: '2025-08-10',
    disbursedAmount: '15000',
    gsPaBalance: '4600',
    vsPaBalance: '2300',
    selected: false,
  },
  {
    sl: '4',
    memberId: '10121100714',
    name: 'Selim Mia',
    dwmPassed: '0',
    c: '8895',
    acNo: 'AC-98214',
    loan: '250',
    gs: 190,
    vs: 130,
    dps: 100,
    pa: '640',
    sc: '110',
    total: '750',
    pa2: '780',
    sc2: '190',
    total2: '970',
    newDue: '13200',
    closingDue: '2800',
    pa3: '14100',
    sc3: '120',
    total3: '14220',
    disbursedDate: '2025-01-10',
    disbursedAmount: '12000',
    gsPaBalance: '3000',
    vsPaBalance: '1400',
    selected: false,
  },
  {
    sl: '5',
    memberId: '10121100715',
    name: 'Faruk Hossain',
    dwmPassed: '1',
    c: '8673',
    acNo: 'AC-41122',
    loan: '310',
    gs: 180,
    vs: 150,
    dps: 210,
    pa: '950',
    sc: '280',
    total: '1230',
    pa2: '1000',
    sc2: '250',
    total2: '1250',
    newDue: '14800',
    closingDue: '4600',
    pa3: '15600',
    sc3: '190',
    total3: '15790',
    disbursedDate: '2022-08-10',
    disbursedAmount: '13900',
    gsPaBalance: '3800',
    vsPaBalance: '1100',
    selected: false,
  },
  {
    sl: '6',
    memberId: '10121100716',
    name: 'Alamin Sheikh',
    dwmPassed: '2',
    c: '9120',
    acNo: 'AC-28901',
    loan: '400',
    gs: 220,
    vs: 160,
    dps: 130,
    pa: '870',
    sc: '240',
    total: '1110',
    pa2: '930',
    sc2: '180',
    total2: '1110',
    newDue: '14200',
    closingDue: '3300',
    pa3: '14900',
    sc3: '200',
    total3: '15100',
    disbursedDate: '2024-07-10',
    disbursedAmount: '14500',
    gsPaBalance: '4200',
    vsPaBalance: '1600',
    selected: false,
  },
  {
    sl: '7',
    memberId: '10121100717',
    name: 'Rafiul Islam',
    dwmPassed: '0',
    c: '8954',
    acNo: 'AC-71234',
    loan: '260',
    gs: 140,
    vs: 120,
    dps: 90,
    pa: '730',
    sc: '150',
    total: '880',
    pa2: '600',
    sc2: '120',
    total2: '720',
    newDue: '12900',
    closingDue: '3100',
    pa3: '13700',
    sc3: '180',
    total3: '13880',
    disbursedDate: '2025-08-10',
    disbursedAmount: '11000',
    gsPaBalance: '2900',
    vsPaBalance: '1000',
    selected: false,
  },
  {
    sl: '8',
    memberId: '10121100718',
    name: 'Nasir Khan',
    dwmPassed: '2',
    c: '9038',
    acNo: 'AC-95178',
    loan: '380',
    gs: 200,
    vs: 130,
    dps: 120,
    pa: '990',
    sc: '300',
    total: '1290',
    pa2: '1150',
    sc2: '210',
    total2: '1360',
    newDue: '15200',
    closingDue: '4900',
    pa3: '16000',
    sc3: '250',
    total3: '16250',
    disbursedDate: '2025-08-10',
    disbursedAmount: '15500',
    gsPaBalance: '4700',
    vsPaBalance: '1900',
    selected: false,
  },
  {
    sl: '9',
    memberId: '10121100719',
    name: 'Tariq Aziz',
    dwmPassed: '1',
    c: '8816',
    acNo: 'AC-32409',
    loan: '300',
    gs: 160,
    vs: 100,
    dps: 180,
    pa: '820',
    sc: '260',
    total: '1080',
    pa2: '970',
    sc2: '180',
    total2: '1150',
    newDue: '13600',
    closingDue: '3700',
    pa3: '14500',
    sc3: '220',
    total3: '14720',
    disbursedDate: '2025-01-06',
    disbursedAmount: '12500',
    gsPaBalance: '3300',
    vsPaBalance: '1300',
    selected: false,
  },
  {
    sl: '10',
    memberId: '10121100720',
    name: 'Sajid Rahman',
    dwmPassed: '0',
    c: '9089',
    acNo: 'AC-50876',
    loan: '410',
    gs: 230,
    vs: 150,
    dps: 160,
    pa: '910',
    sc: '190',
    total: '1100',
    pa2: '960',
    sc2: '240',
    total2: '1200',
    newDue: '14900',
    closingDue: '4100',
    pa3: '15700',
    sc3: '230',
    total3: '15930',
    disbursedDate: '2025-08-10',
    disbursedAmount: '14800',
    gsPaBalance: '4000',
    vsPaBalance: '1500',
    selected: false,
  },
])

const showData = () => {
  isEnabled.value = true
}

const logData = () => {
  console.log(data.value)
}
</script>

<style>
h1 {
  font-family: Arial, sans-serif;
  text-align: center;
  margin-bottom: 20px;
}

.table-container {
  background-color: rgb(231, 231, 231);
  padding-inline: 0px;
  margin-inline: 20px;
}
</style>
